Dreadful example of school-level code generated by ChatGPT. The implementation and methods are terrible, with a complexity score (CS) of 7 for 'manage_borrow_return' and 6 for 'search_books.'

The refactoring to reduce the cyclomatic complexity involved adding a basic abstraction (in this example, poorly done directly in the 'Library' class; in real code, it should be placed in a separate abstraction) and redefining the base logic. I attempted to eliminate conditional statements and loops as much as possible. As a result, I ended up with a code that, while created 'in a vacuum,' is relatively neat, with a CS of 1 or 2 for all methods.